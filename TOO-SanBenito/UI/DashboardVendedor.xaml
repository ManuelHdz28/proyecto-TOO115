<Page x:Class="TOO_SanBenito.UI.DashboardVendedor"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      mc:Ignorable="d"
      d:DesignHeight="600" d:DesignWidth="1000"
      Title="Dashboard Vendedor">

    <Page.Resources>
        <SolidColorBrush x:Key="SuccessBrush" Color="#10B981"/>
        <SolidColorBrush x:Key="WarningBrush" Color="#F59E0B"/>
        <SolidColorBrush x:Key="PrimaryBrush" Color="#2563EB"/>
        <SolidColorBrush x:Key="DangerBrush" Color="#EF4444"/>
    </Page.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="0" Margin="0" Background="#F8FAFC">
        <StackPanel Margin="0">
            <!-- Mensaje de bienvenida -->
            <Border Background="White" Margin="0,0,0,20" Padding="30" BorderBrush="#E2E8F0" BorderThickness="0,0,0,1">
                <StackPanel>
                    <TextBlock x:Name="TxtSaludo"
                               Text="Â¡Buen dÃ­a, Vendedor!"
                               FontSize="24"
                               FontWeight="Bold"
                               Margin="0,0,0,5"/>
                    <TextBlock x:Name="TxtFecha"
                               Text="Lunes, 04 de Noviembre 2025"
                               FontSize="14"
                               Foreground="#64748B"/>
                </StackPanel>
            </Border>

            <!-- Tarjetas principales -->
            <Grid Margin="20,0,20,20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Ventas del DÃ­a -->
                <Border Grid.Column="0" Background="White" CornerRadius="12" Padding="25" Margin="0,0,10,0">
                    <Border.Effect>
                        <DropShadowEffect Color="#000000" Opacity="0.08" ShadowDepth="2" BlurRadius="12"/>
                    </Border.Effect>
                    <StackPanel>
                        <TextBlock Text="ðŸ’°" FontSize="36" Margin="0,0,0,12"/>
                        <TextBlock Text="Ventas del DÃ­a"
                                   FontSize="13"
                                   Foreground="#64748B"
                                   Margin="0,0,0,8"/>
                        <TextBlock x:Name="TxtVentasHoy"
                                   Text="$0.00"
                                   FontSize="32"
                                   FontWeight="Bold"
                                   Foreground="{StaticResource SuccessBrush}"/>
                        <TextBlock x:Name="TxtNumVentasHoy"
                                   Text="0 transacciones"
                                   FontSize="12"
                                   Foreground="#94A3B8"
                                   Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Transacciones -->
                <Border Grid.Column="1" Background="White" CornerRadius="12" Padding="25" Margin="5,0">
                    <Border.Effect>
                        <DropShadowEffect Color="#000000" Opacity="0.08" ShadowDepth="2" BlurRadius="12"/>
                    </Border.Effect>
                    <StackPanel>
                        <TextBlock Text="ðŸ“Š" FontSize="36" Margin="0,0,0,12"/>
                        <TextBlock Text="Productos Vendidos"
                                   FontSize="13"
                                   Foreground="#64748B"
                                   Margin="0,0,0,8"/>
                        <TextBlock x:Name="TxtProductosVendidos"
                                   Text="0"
                                   FontSize="32"
                                   FontWeight="Bold"
                                   Foreground="{StaticResource PrimaryBrush}"/>
                        <TextBlock x:Name="TxtUltimaVenta"
                                   Text="Ãšltima venta: --:--"
                                   FontSize="12"
                                   Foreground="#94A3B8"
                                   Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Promedio Venta -->
                <Border Grid.Column="2" Background="White" CornerRadius="12" Padding="25" Margin="10,0,0,0">
                    <Border.Effect>
                        <DropShadowEffect Color="#000000" Opacity="0.08" ShadowDepth="2" BlurRadius="12"/>
                    </Border.Effect>
                    <StackPanel>
                        <TextBlock Text="ðŸ“ˆ" FontSize="36" Margin="0,0,0,12"/>
                        <TextBlock Text="Promedio por Venta"
                                   FontSize="13"
                                   Foreground="#64748B"
                                   Margin="0,0,0,8"/>
                        <TextBlock x:Name="TxtPromedioVenta"
                                   Text="$0.00"
                                   FontSize="32"
                                   FontWeight="Bold"
                                   Foreground="{StaticResource WarningBrush}"/>
                        <TextBlock Text="Ticket promedio"
                                   FontSize="12"
                                   Foreground="#94A3B8"
                                   Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Historial de Ventas del DÃ­a -->
            <Border Background="White" CornerRadius="12" Margin="20,0,20,20" Padding="25">
                <Border.Effect>
                    <DropShadowEffect Color="#000000" Opacity="0.08" ShadowDepth="2" BlurRadius="12"/>
                </Border.Effect>
                <StackPanel>
                    <Grid Margin="0,0,0,20">
                        <TextBlock Text="Historial de Ventas de Hoy"
                                   FontSize="18"
                                   FontWeight="Bold"/>
                        <Button Content="âŸ³ Actualizar"
                                HorizontalAlignment="Right"
                                Background="#F1F5F9"
                                BorderThickness="0"
                                Padding="12,6"
                                Cursor="Hand"
                                Click="BtnActualizar_Click"/>
                    </Grid>

                    <DataGrid x:Name="DgVentasHoy"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False"
                              IsReadOnly="True"
                              SelectionMode="Single"
                              GridLinesVisibility="None"
                              HeadersVisibility="Column"
                              Background="Transparent"
                              BorderThickness="0"
                              RowHeight="50"
                              MaxHeight="400">

                        <DataGrid.Columns>
                            <DataGridTextColumn Header="# Venta" Binding="{Binding Id}" Width="80"/>
                            <DataGridTextColumn Header="Hora" Binding="{Binding Fecha, StringFormat=HH:mm}" Width="80"/>
                            <DataGridTextColumn Header="Productos" Binding="{Binding CantidadProductos}" Width="100"/>
                            <DataGridTextColumn Header="Total" Binding="{Binding Total, StringFormat=C2}" Width="120"/>

                            <DataGridTemplateColumn Header="Estado" Width="100">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Border Background="#D1FAE5"
                                                CornerRadius="12"
                                                Padding="8,4"
                                                HorizontalAlignment="Center">
                                            <TextBlock Text="âœ“ Completada"
                                                       FontSize="11"
                                                       FontWeight="SemiBold"
                                                       Foreground="#065F46"/>
                                        </Border>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn Header="Detalles" Width="*">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Button Content="Ver Detalles"
                                                Background="#3B82F6"
                                                Foreground="White"
                                                BorderThickness="0"
                                                Padding="10,5"
                                                Cursor="Hand"
                                                Click="BtnVerDetalles_Click"
                                                Tag="{Binding Id}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>

                        <DataGrid.RowStyle>
                            <Style TargetType="DataGridRow">
                                <Setter Property="Background" Value="White"/>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#F8FAFC"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </DataGrid.RowStyle>
                    </DataGrid>

                    <TextBlock x:Name="TxtSinVentas"
                               Text="No hay ventas registradas hoy"
                               HorizontalAlignment="Center"
                               Foreground="#94A3B8"
                               Margin="0,40,0,0"
                               Visibility="Collapsed"/>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</Page>
